services:
  nanta-worker:
    image: node:22-bookworm
    container_name: nanta-worker
    restart: unless-stopped
    working_dir: /app
    env_file:
      - .env.nanta
    environment:
      - TZ=UTC
      - NANTA_STATE_PATH=/state/nanta-worker-state.json
    volumes:
      - ../../:/app
      - nanta_state:/state
    command: ["node", "/app/deploy/nanta/worker.mjs"]

volumes:
  nanta_state:
